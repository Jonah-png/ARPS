<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
        <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
        <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
        <script src="https://raw.githack.com/andgokevin/aframe-gesture-detector-component/master/dist/aframe-gesture-detector-component.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js"></script>

    </head>

    <body style="margin: 0; overflow: hidden;">
        <div id="ar-container" style="width: 100%; height: 100%; margin: 0 auto;"> 
        <a-scene
            vr-mode-ui="enabled: false"
            embedded
            loading-screen="enabled: false;"
            arjs="sourceType: webcam; debugUIEnabled: false;"
            gesture-detector="element: #ar-image;"
        >
        
                <a-image
                    src="displayed_img.png"
                    look-at="[camera]"
                    scale="1 1 1"
                    position="0 0 -5"
                    id="ar-image"
                ></a-image>

                <a-camera id="camera" camera look-controls></a-camera>
        </a-scene>
        </div>
        <style>
            #ar-container {
            position: relative;
            }
        </style>
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                const arImage = document.querySelector('#ar-image');
                const cameraEl = document.querySelector('#camera');
                const canvas = document.querySelector('canvas');
                const hammer = new Hammer(canvas);
                let initialScale = 1;
                let newScale;
        
                let initialY = 0;
                let deltaY = 0;
                let newPosition;

                hammer.get('swipe').set({ direction: Hammer.DIRECTION_VERTICAL });

                hammer.on('swipeup', function (event) {
                    initialY = arImage.getAttribute('position').y;
                    deltaY = 0.2;
                    newPosition = initialY + deltaY;
                    arImage.setAttribute('position', { x: 0, y: newPosition, z: -5 });
                });

                hammer.on('swipedown', function (event) {
                    initialY = arImage.getAttribute('position').y;
                    deltaY = -0.2;
                    newPosition = initialY + deltaY;
                    arImage.setAttribute('position', { x: 0, y: newPosition, z: -5 });
                });


                hammer.get('pinch').set({ enable: true });
        
                hammer.on('pinchstart', function (event) {
                    initialScale = arImage.getAttribute('scale').x;
                });
        
                hammer.on('pinchmove', function (event) {
                    newScale = initialScale * event.scale;
                    arImage.setAttribute('scale', { x: newScale, y: newScale, z: newScale });
                });
            });
        </script>
    </body>
</html>
